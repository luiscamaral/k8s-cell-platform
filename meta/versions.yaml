# Kubernetes Cell Platform - Version Compatibility Matrix
# This file tracks compatible versions across all layers

platform_version: "0.4.0"
last_updated: "2026-01-02"

layers:
  l0_infrastructure:
    version: "1.0.0"
    status: deployed
    components:
      talos: "1.11.5"
      kubernetes: "1.34.0"
      cilium: "1.18.5"  # LTS via Helm
      terraform: "1.12.2"
      proxmox_provider: "0.88.0"
      talos_provider: "0.9.0"

  l1_cluster_platform:
    version: "1.2.0"
    status: deployed
    requires:
      l0_infrastructure: ">=1.0.0"
    components:
      metallb: "0.15.3"
      nginx_ingress: "4.14.1"
      metrics_server: "3.13.0"
      external_dns: "0.19.0"
      linkerd: "edge-25.12.3"      # CLI-managed
      linkerd_viz: "edge-25.12.3"  # CLI-managed
      karpenter: "0.4.1"

  l2_core_platform:
    version: "0.3.0"
    status: deployed
    requires:
      l1_cluster_platform: ">=1.0.0"
    components:
      argocd: "3.2.3"
      kyverno: "1.16.1"
      sops: "not_configured"
      # Note: linkerd and metrics_server moved to L1

  l3_ci_supply_chain:
    version: "0.0.0"
    status: planned
    requires:
      l2_core_platform: ">=0.1.0"
    components:
      tekton: "latest"
      harbor: "latest"
      gitea: "latest"

  l4_observability:
    version: "0.0.0"
    status: planned
    requires:
      l2_core_platform: ">=0.1.0"
    components:
      prometheus: "latest"
      loki: "latest"
      tempo: "latest"
      grafana: "latest"

  l5_resilience:
    version: "0.0.0"
    status: planned
    requires:
      l4_observability: ">=0.1.0"
    components:
      velero: "latest"

  l6_security:
    version: "0.0.0"
    status: planned
    requires:
      l2_core_platform: ">=0.1.0"
    components:
      falco: "latest"

  l7_developer_portal:
    version: "0.0.0"
    status: planned
    requires:
      l2_core_platform: ">=0.1.0"
    components:
      backstage: "latest"

# Compatibility constraints
compatibility:
  kubernetes:
    min: "1.30"
    max: "1.35"
  talos:
    min: "1.10"
    max: "1.12"
  cilium:
    min: "1.16"
    max: "1.19"

# Provider support
providers:
  proxmox:
    status: ready
    tested_versions: ["8.0", "8.1", "8.2"]
  aws:
    status: planned
  azure:
    status: planned
  gcp:
    status: planned
  vsphere:
    status: planned
